meta {
  name: Create Order
  type: http
  seq: 3
}

post {
  url: https://localhost/order/create
  body: json
  auth: bearer
}

headers {
  Authorization: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwiZW1haWwiOiJhZG1pbkBleGFtcGxlLmNvbSIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc2MTU1NTUxMH0.CL9AWKv00h98JJyXG0RNlvdyF20Gju1vw1ZMFiP5WEbWq2fxxooRTeQzK_9h4e-C-9bWdJRDO3BMcTDtg3Gtgo8vnwF5hP4XU-inj18WpoMNL3eLZu75s5gt2IVi-szNYzZF-Pm3akwCnvvaeJCIaw35uMcoW8qQmbr0asQ98u9z3l0eEd-_geBNDpB02wApiirvtMtU5EkUxeYrVmh5UeN-MccGK4KUiuG4n9IKYcNC-hQpxkNqTwBcalmKHibfUCpMSmYWRfwVsq8P9ZI0ZKghVJURpHTkiYbNBUemL_tldR5_gvcjjRYL_11f7Ssm1j8qZHx5NH63EXDtCwlozw
}

auth:bearer {
  token: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwiZXhwIjoxNzY3OTU2MjQ5LCJyb2xlIjoiYWRtaW4iLCJ0eXBlIjoiYWNjZXNzIn0.WyHLQ2xL9jHmAgPOxXtumX1oWwJr0A_NPkhIVv62vRbIEAtQvUSV0wdPFlOB6RpVV5dhi3B0i1x66GMMS2UOuTM7ztYA-Py2fQZEwSzurg5OEyi0mgGiEkRrskRWTFoDuLsmnCXIzArAmRXtS2ZWC3rgQ8P-xvWhwn4jbC8vWokmfwXcdl6g5Zk8h0Lrqe5d9WZ7-UCg1wzaDA2VdUW054DZQ6dPNwUyg2L1NxkVn3eOkxC8AzKrzwQkzZtIOG_01IKIIR-tJqJ2hBXOOUGCPsTt8-C_vyHqluQasHj3bAq6QF6qfQdItjJrrgYqEfzoo9zU8KPQcU0TOX5TeiPUQqa5EC_IJd59I1mHW42WB8SQ1kHDDiERluWlV-TUX85UwPGXfKqFb73ImTrFEycLjDDo0OHe8mcdabt_dKKPzs2IEQq2QR7TNJeb9HfV6V165crhk4bLyMDmfh_EC1LMWymCw_GqEKRDn0sDIM7K01adiyCHGvZKYbkx7zGxhWLeGvITmh77DKeKjb8wcG7M6PtdOj8yJ1ceqq8FCd1V3S49fQXehqNC7CANFsUvrk8TaodIonKmhoR1PREts6L-OmU-zn7ieGeyg3H-1la4eE2yVy-Tsh_CGg1M8Z59WjR2Qnwzh00FQg5L5h1wAgju0LkXcFPQ27qXHZ-xQCDLXdc
}

body:json {
  {
    "city": "Donostia",
    "street": "Toki Eder",
    "zip": "20",
    "pieces": [
      {
        "piece_type": "A",
        "quantity": 5
      },
      {
        "piece_type": "B",
        "quantity": 5
      }
    ]
  }
}

docs {
  # Create Order
  
  Creates a new manufacturing order in the system.
  
  ## Request Body
  - `client_id` (integer, required): ID of the client placing the order
  - `number_of_pieces` (integer, required): Number of pieces to manufacture
  - `description` (string, required): Description of the order
  
  ## Expected Response (201 Created)
  ```json
  {
    "id": 1,
    "client_id": 1,
    "number_of_pieces": 5,
    "description": "Order for custom parts",
    "status": "Pending",
    "created_at": "2025-10-23T10:30:00",
    "pieces": []
  }
  ```
  
  ## Events Published
  This endpoint publishes an `order.created` event to RabbitMQ.
}

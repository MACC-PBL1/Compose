meta {
  name: View all pieces
  type: http
  seq: 1
}

get {
  url: https://localhost/machine/status/piece
  body: none
  auth: inherit
}

headers {
  Authorization: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwiZW1haWwiOiJhZG1pbkBleGFtcGxlLmNvbSIsInJvbGUiOiJhZG1pbiIsInR5cGUiOiJyZWZyZXNoIiwiZXhwIjoxNzYyMTI3MjM4fQ.LRgj5HGAnl3zWOsi6dsE4u9MjPfrTsxVD0j5_bRWp4F1QXcPytTWVOdsNESDe7WWAhiOStt_jZHxtwwE69GSSEie7_FJ969Q4SutNQoQPVo2yo_YF4ioSQXMw0Ye8h6pg-I4Mio7uH2dXJJLnqI37rLEbHEq4j2uODgNUnB42eESQoHxN2ogz6AqDYbB3rHglQ9lp9bYP4gPIBEl6u8eGGgPNNrdbXV25dXGhaR8-ovRiuUrW2cWKyTVYYX7MfOaln_e4vfKawf5z5whwFlnf9mJEesh3ISNuoAPTHQ8z8CU7ohqV7Ptf2iGqOAplY-zENrK5aX_hEkYX9OPGE7aGA
}

vars:post-response {
  pieceId: res('[0].id')
}

assert {
  res.status: eq 200
  res.body: isArray
}

settings {
  encodeUrl: true
  timeout: 0
}
